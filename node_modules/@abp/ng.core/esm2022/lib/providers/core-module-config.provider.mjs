import { makeEnvironmentProviders, APP_INITIALIZER, Injector } from '@angular/core';
import { TitleStrategy } from '@angular/router';
import { provideHttpClient, withInterceptorsFromDi, withXsrfConfiguration, } from '@angular/common/http';
import { CORE_OPTIONS, LOCALIZATIONS, DYNAMIC_LAYOUTS_TOKEN, OTHERS_GROUP, QUEUE_MANAGER, SORT_COMPARE_FUNC, TENANT_KEY, compareFuncFactory, coreOptionsFactory, localizationContributor, } from '../tokens';
import { RoutesHandler } from '../handlers';
import { AuthErrorFilterService } from '../abstracts';
import { DEFAULT_DYNAMIC_LAYOUTS } from '../constants';
import { LocalizationService, LocalStorageListenerService, AbpTitleStrategy } from '../services';
import { DefaultQueueManager, getInitialData, localeInitializer, noop } from '../utils';
import { CookieLanguageProvider, IncludeLocalizationResourcesProvider, LocaleProvider } from './';
export var CoreFeatureKind;
(function (CoreFeatureKind) {
    CoreFeatureKind[CoreFeatureKind["Options"] = 0] = "Options";
    CoreFeatureKind[CoreFeatureKind["CompareFunctionFactory"] = 1] = "CompareFunctionFactory";
    CoreFeatureKind[CoreFeatureKind["TitleStrategy"] = 2] = "TitleStrategy";
})(CoreFeatureKind || (CoreFeatureKind = {}));
function makeCoreFeature(kind, providers) {
    return {
        ɵkind: kind,
        ɵproviders: providers,
    };
}
export function withOptions(options = {}) {
    return makeCoreFeature(CoreFeatureKind.Options, [
        {
            provide: 'CORE_OPTIONS',
            useValue: options,
        },
        {
            provide: CORE_OPTIONS,
            useFactory: coreOptionsFactory,
            deps: ['CORE_OPTIONS'],
        },
        { provide: TENANT_KEY, useValue: options.tenantKey || '__tenant' },
        {
            provide: LOCALIZATIONS,
            multi: true,
            useValue: localizationContributor(options.localizations),
            deps: [LocalizationService],
        },
        {
            provide: OTHERS_GROUP,
            useValue: options.othersGroup || 'AbpUi::OthersGroup',
        },
        {
            provide: DYNAMIC_LAYOUTS_TOKEN,
            useValue: options.dynamicLayouts || DEFAULT_DYNAMIC_LAYOUTS,
        },
    ]);
}
export function withTitleStrategy(strategy) {
    return makeCoreFeature(CoreFeatureKind.TitleStrategy, [
        {
            provide: TitleStrategy,
            useExisting: strategy,
        },
    ]);
}
export function withCompareFuncFactory(factory) {
    return makeCoreFeature(CoreFeatureKind.CompareFunctionFactory, [
        {
            provide: SORT_COMPARE_FUNC,
            useFactory: factory,
        },
    ]);
}
export function provideAbpCore(...features) {
    const providers = [
        provideHttpClient(withInterceptorsFromDi(), withXsrfConfiguration({
            cookieName: 'XSRF-TOKEN',
            headerName: 'RequestVerificationToken',
        })),
        LocaleProvider,
        CookieLanguageProvider,
        {
            provide: APP_INITIALIZER,
            multi: true,
            deps: [Injector],
            useFactory: getInitialData,
        },
        {
            provide: APP_INITIALIZER,
            multi: true,
            deps: [Injector],
            useFactory: localeInitializer,
        },
        {
            provide: APP_INITIALIZER,
            multi: true,
            deps: [LocalizationService],
            useFactory: noop,
        },
        {
            provide: APP_INITIALIZER,
            multi: true,
            deps: [LocalStorageListenerService],
            useFactory: noop,
        },
        {
            provide: APP_INITIALIZER,
            multi: true,
            deps: [RoutesHandler],
            useFactory: noop,
        },
        {
            provide: SORT_COMPARE_FUNC,
            useFactory: compareFuncFactory,
        },
        {
            provide: QUEUE_MANAGER,
            useClass: DefaultQueueManager,
        },
        AuthErrorFilterService,
        IncludeLocalizationResourcesProvider,
        {
            provide: TitleStrategy,
            useExisting: AbpTitleStrategy,
        },
    ];
    for (const feature of features) {
        providers.push(...feature.ɵproviders);
    }
    return makeEnvironmentProviders(providers);
}
export function provideAbpCoreChild(options = {}) {
    return makeEnvironmentProviders([
        {
            provide: LOCALIZATIONS,
            multi: true,
            useValue: localizationContributor(options.localizations),
            deps: [LocalizationService],
        },
    ]);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZS1tb2R1bGUtY29uZmlnLnByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3Byb3ZpZGVycy9jb3JlLW1vZHVsZS1jb25maWcucHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHdCQUF3QixFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQVksTUFBTSxlQUFlLENBQUM7QUFDOUYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2hELE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsc0JBQXNCLEVBQ3RCLHFCQUFxQixHQUN0QixNQUFNLHNCQUFzQixDQUFDO0FBQzlCLE9BQU8sRUFDTCxZQUFZLEVBQ1osYUFBYSxFQUNiLHFCQUFxQixFQUNyQixZQUFZLEVBQ1osYUFBYSxFQUNiLGlCQUFpQixFQUNqQixVQUFVLEVBQ1Ysa0JBQWtCLEVBQ2xCLGtCQUFrQixFQUNsQix1QkFBdUIsR0FDeEIsTUFBTSxXQUFXLENBQUM7QUFDbkIsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUU1QyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDdEQsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3ZELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSwyQkFBMkIsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUNqRyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsY0FBYyxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN4RixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsb0NBQW9DLEVBQUUsY0FBYyxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBRWxHLE1BQU0sQ0FBTixJQUFZLGVBSVg7QUFKRCxXQUFZLGVBQWU7SUFDekIsMkRBQU8sQ0FB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LE9BQU8sRUFBRSxpQkFBaUI7WUFDMUIsVUFBVSxFQUFFLGtCQUFrQjtTQUMvQjtRQUNEO1lBQ0UsT0FBTyxFQUFFLGFBQWE7WUFDdEIsUUFBUSxFQUFFLG1CQUFtQjtTQUM5QjtRQUNELHNCQUFzQjtRQUN0QixvQ0FBb0M7UUFDcEM7WUFDRSxPQUFPLEVBQUUsYUFBYTtZQUN0QixXQUFXLEVBQUUsZ0JBQWdCO1NBQzlCO0tBQ0YsQ0FBQztJQUVGLEtBQUssTUFBTSxPQUFPLElBQUksUUFBUSxFQUFFLENBQUM7UUFDL0IsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQsT0FBTyx3QkFBd0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM3QyxDQUFDO0FBRUQsTUFBTSxVQUFVLG1CQUFtQixDQUFDLFVBQVUsRUFBZTtJQUMzRCxPQUFPLHdCQUF3QixDQUFDO1FBQzlCO1lBQ0UsT0FBTyxFQUFFLGFBQWE7WUFDdEIsS0FBSyxFQUFFLElBQUk7WUFDWCxRQUFRLEVBQUUsdUJBQXVCLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQztZQUN4RCxJQUFJLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQztTQUM1QjtLQUNGLENBQUMsQ0FBQztBQUNMLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYWtlRW52aXJvbm1lbnRQcm92aWRlcnMsIEFQUF9JTklUSUFMSVpFUiwgSW5qZWN0b3IsIFByb3ZpZGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRpdGxlU3RyYXRlZ3kgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge1xyXG4gIHByb3ZpZGVIdHRwQ2xpZW50LFxyXG4gIHdpdGhJbnRlcmNlcHRvcnNGcm9tRGksXHJcbiAgd2l0aFhzcmZDb25maWd1cmF0aW9uLFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHtcclxuICBDT1JFX09QVElPTlMsXHJcbiAgTE9DQUxJWkFUSU9OUyxcclxuICBEWU5BTUlDX0xBWU9VVFNfVE9LRU4sXHJcbiAgT1RIRVJTX0dST1VQLFxyXG4gIFFVRVVFX01BTkFHRVIsXHJcbiAgU09SVF9DT01QQVJFX0ZVTkMsXHJcbiAgVEVOQU5UX0tFWSxcclxuICBjb21wYXJlRnVuY0ZhY3RvcnksXHJcbiAgY29yZU9wdGlvbnNGYWN0b3J5LFxyXG4gIGxvY2FsaXphdGlvbkNvbnRyaWJ1dG9yLFxyXG59IGZyb20gJy4uL3Rva2Vucyc7XHJcbmltcG9ydCB7IFJvdXRlc0hhbmRsZXIgfSBmcm9tICcuLi9oYW5kbGVycyc7XHJcbmltcG9ydCB7IEFCUCwgU29ydGFibGVJdGVtIH0gZnJvbSAnLi4vbW9kZWxzJztcclxuaW1wb3J0IHsgQXV0aEVycm9yRmlsdGVyU2VydmljZSB9IGZyb20gJy4uL2Fic3RyYWN0cyc7XHJcbmltcG9ydCB7IERFRkFVTFRfRFlOQU1JQ19MQVlPVVRTIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgTG9jYWxpemF0aW9uU2VydmljZSwgTG9jYWxTdG9yYWdlTGlzdGVuZXJTZXJ2aWNlLCBBYnBUaXRsZVN0cmF0ZWd5IH0gZnJvbSAnLi4vc2VydmljZXMnO1xyXG5pbXBvcnQgeyBEZWZhdWx0UXVldWVNYW5hZ2VyLCBnZXRJbml0aWFsRGF0YSwgbG9jYWxlSW5pdGlhbGl6ZXIsIG5vb3AgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IENvb2tpZUxhbmd1YWdlUHJvdmlkZXIsIEluY2x1ZGVMb2NhbGl6YXRpb25SZXNvdXJjZXNQcm92aWRlciwgTG9jYWxlUHJvdmlkZXIgfSBmcm9tICcuLyc7XHJcblxyXG5leHBvcnQgZW51bSBDb3JlRmVhdHVyZUtpbmQge1xyXG4gIE9wdGlvbnMsXHJcbiAgQ29tcGFyZUZ1bmN0aW9uRmFjdG9yeSxcclxuICBUaXRsZVN0cmF0ZWd5LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvcmVGZWF0dXJlPEtpbmRUIGV4dGVuZHMgQ29yZUZlYXR1cmVLaW5kPiB7XHJcbiAgybVraW5kOiBLaW5kVDtcclxuICDJtXByb3ZpZGVyczogUHJvdmlkZXJbXTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNvcmVGZWF0dXJlPEtpbmRUIGV4dGVuZHMgQ29yZUZlYXR1cmVLaW5kPihcclxuICBraW5kOiBLaW5kVCxcclxuICBwcm92aWRlcnM6IFByb3ZpZGVyW10sXHJcbik6IENvcmVGZWF0dXJlPEtpbmRUPiB7XHJcbiAgcmV0dXJuIHtcclxuICAgIMm1a2luZDoga2luZCxcclxuICAgIMm1cHJvdmlkZXJzOiBwcm92aWRlcnMsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhPcHRpb25zKG9wdGlvbnMgPSB7fSBhcyBBQlAuUm9vdCk6IENvcmVGZWF0dXJlPENvcmVGZWF0dXJlS2luZC5PcHRpb25zPiB7XHJcbiAgcmV0dXJuIG1ha2VDb3JlRmVhdHVyZShDb3JlRmVhdHVyZUtpbmQuT3B0aW9ucywgW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiAnQ09SRV9PUFRJT05TJyxcclxuICAgICAgdXNlVmFsdWU6IG9wdGlvbnMsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBDT1JFX09QVElPTlMsXHJcbiAgICAgIHVzZUZhY3Rvcnk6IGNvcmVPcHRpb25zRmFjdG9yeSxcclxuICAgICAgZGVwczogWydDT1JFX09QVElPTlMnXSxcclxuICAgIH0sXHJcbiAgICB7IHByb3ZpZGU6IFRFTkFOVF9LRVksIHVzZVZhbHVlOiBvcHRpb25zLnRlbmFudEtleSB8fCAnX190ZW5hbnQnIH0sXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IExPQ0FMSVpBVElPTlMsXHJcbiAgICAgIG11bHRpOiB0cnVlLFxyXG4gICAgICB1c2VWYWx1ZTogbG9jYWxpemF0aW9uQ29udHJpYnV0b3Iob3B0aW9ucy5sb2NhbGl6YXRpb25zKSxcclxuICAgICAgZGVwczogW0xvY2FsaXphdGlvblNlcnZpY2VdLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogT1RIRVJTX0dST1VQLFxyXG4gICAgICB1c2VWYWx1ZTogb3B0aW9ucy5vdGhlcnNHcm91cCB8fCAnQWJwVWk6Ok90aGVyc0dyb3VwJyxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IERZTkFNSUNfTEFZT1VUU19UT0tFTixcclxuICAgICAgdXNlVmFsdWU6IG9wdGlvbnMuZHluYW1pY0xheW91dHMgfHwgREVGQVVMVF9EWU5BTUlDX0xBWU9VVFMsXHJcbiAgICB9LFxyXG4gIF0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2l0aFRpdGxlU3RyYXRlZ3koc3RyYXRlZ3k6IHVua25vd24pOiBDb3JlRmVhdHVyZTxDb3JlRmVhdHVyZUtpbmQuVGl0bGVTdHJhdGVneT4ge1xyXG4gIHJldHVybiBtYWtlQ29yZUZlYXR1cmUoQ29yZUZlYXR1cmVLaW5kLlRpdGxlU3RyYXRlZ3ksIFtcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogVGl0bGVTdHJhdGVneSxcclxuICAgICAgdXNlRXhpc3Rpbmc6IHN0cmF0ZWd5LFxyXG4gICAgfSxcclxuICBdKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDb21wYXJlRnVuY0ZhY3RvcnkoXHJcbiAgZmFjdG9yeTogKGE6IFNvcnRhYmxlSXRlbSwgYjogU29ydGFibGVJdGVtKSA9PiAxIHwgLTEgfCAwLFxyXG4pOiBDb3JlRmVhdHVyZTxDb3JlRmVhdHVyZUtpbmQuQ29tcGFyZUZ1bmN0aW9uRmFjdG9yeT4ge1xyXG4gIHJldHVybiBtYWtlQ29yZUZlYXR1cmUoQ29yZUZlYXR1cmVLaW5kLkNvbXBhcmVGdW5jdGlvbkZhY3RvcnksIFtcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogU09SVF9DT01QQVJFX0ZVTkMsXHJcbiAgICAgIHVzZUZhY3Rvcnk6IGZhY3RvcnksXHJcbiAgICB9LFxyXG4gIF0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJvdmlkZUFicENvcmUoLi4uZmVhdHVyZXM6IENvcmVGZWF0dXJlPENvcmVGZWF0dXJlS2luZD5bXSkge1xyXG4gIGNvbnN0IHByb3ZpZGVycyA9IFtcclxuICAgIHByb3ZpZGVIdHRwQ2xpZW50KFxyXG4gICAgICB3aXRoSW50ZXJjZXB0b3JzRnJvbURpKCksXHJcbiAgICAgIHdpdGhYc3JmQ29uZmlndXJhdGlvbih7XHJcbiAgICAgICAgY29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxyXG4gICAgICAgIGhlYWRlck5hbWU6ICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nLFxyXG4gICAgICB9KSxcclxuICAgICksXHJcbiAgICBMb2NhbGVQcm92aWRlcixcclxuICAgIENvb2tpZUxhbmd1YWdlUHJvdmlkZXIsXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IEFQUF9JTklUSUFMSVpFUixcclxuICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICAgIGRlcHM6IFtJbmplY3Rvcl0sXHJcbiAgICAgIHVzZUZhY3Rvcnk6IGdldEluaXRpYWxEYXRhLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogQVBQX0lOSVRJQUxJWkVSLFxyXG4gICAgICBtdWx0aTogdHJ1ZSxcclxuICAgICAgZGVwczogW0luamVjdG9yXSxcclxuICAgICAgdXNlRmFjdG9yeTogbG9jYWxlSW5pdGlhbGl6ZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBBUFBfSU5JVElBTElaRVIsXHJcbiAgICAgIG11bHRpOiB0cnVlLFxyXG4gICAgICBkZXBzOiBbTG9jYWxpemF0aW9uU2VydmljZV0sXHJcbiAgICAgIHVzZUZhY3Rvcnk6IG5vb3AsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBBUFBfSU5JVElBTElaRVIsXHJcbiAgICAgIG11bHRpOiB0cnVlLFxyXG4gICAgICBkZXBzOiBbTG9jYWxTdG9yYWdlTGlzdGVuZXJTZXJ2aWNlXSxcclxuICAgICAgdXNlRmFjdG9yeTogbm9vcCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IEFQUF9JTklUSUFMSVpFUixcclxuICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICAgIGRlcHM6IFtSb3V0ZXNIYW5kbGVyXSxcclxuICAgICAgdXNlRmFjdG9yeTogbm9vcCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IFNPUlRfQ09NUEFSRV9GVU5DLFxyXG4gICAgICB1c2VGYWN0b3J5OiBjb21wYXJlRnVuY0ZhY3RvcnksXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBRVUVVRV9NQU5BR0VSLFxyXG4gICAgICB1c2VDbGFzczogRGVmYXVsdFF1ZXVlTWFuYWdlcixcclxuICAgIH0sXHJcbiAgICBBdXRoRXJyb3JGaWx0ZXJTZXJ2aWNlLFxyXG4gICAgSW5jbHVkZUxvY2FsaXphdGlvblJlc291cmNlc1Byb3ZpZGVyLFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBUaXRsZVN0cmF0ZWd5LFxyXG4gICAgICB1c2VFeGlzdGluZzogQWJwVGl0bGVTdHJhdGVneSxcclxuICAgIH0sXHJcbiAgXTtcclxuXHJcbiAgZm9yIChjb25zdCBmZWF0dXJlIG9mIGZlYXR1cmVzKSB7XHJcbiAgICBwcm92aWRlcnMucHVzaCguLi5mZWF0dXJlLsm1cHJvdmlkZXJzKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBtYWtlRW52aXJvbm1lbnRQcm92aWRlcnMocHJvdmlkZXJzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVBYnBDb3JlQ2hpbGQob3B0aW9ucyA9IHt9IGFzIEFCUC5DaGlsZCkge1xyXG4gIHJldHVybiBtYWtlRW52aXJvbm1lbnRQcm92aWRlcnMoW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBMT0NBTElaQVRJT05TLFxyXG4gICAgICBtdWx0aTogdHJ1ZSxcclxuICAgICAgdXNlVmFsdWU6IGxvY2FsaXphdGlvbkNvbnRyaWJ1dG9yKG9wdGlvbnMubG9jYWxpemF0aW9ucyksXHJcbiAgICAgIGRlcHM6IFtMb2NhbGl6YXRpb25TZXJ2aWNlXSxcclxuICAgIH0sXHJcbiAgXSk7XHJcbn1cclxuIl19