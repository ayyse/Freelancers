import { differentLocales } from '@abp/ng.core';
import { isDevMode } from '@angular/core';
let localeMap = {};
function loadLocale(locale) {
    // hard coded list works with esbuild. Source https://github.com/angular/angular-cli/issues/26904#issuecomment-1903596563
    const list = {
        'ar': () => import('@angular/common/locales/ar'),
        'cs': () => import('@angular/common/locales/cs'),
        'en': () => import('@angular/common/locales/en'),
        'en-GB': () => import('@angular/common/locales/en-GB'),
        'es': () => import('@angular/common/locales/es'),
        'de': () => import('@angular/common/locales/de'),
        'fi': () => import('@angular/common/locales/fi'),
        'fr': () => import('@angular/common/locales/fr'),
        'hi': () => import('@angular/common/locales/hi'),
        'hu': () => import('@angular/common/locales/hu'),
        'is': () => import('@angular/common/locales/is'),
        'it': () => import('@angular/common/locales/it'),
        'pt': () => import('@angular/common/locales/pt'),
        'tr': () => import('@angular/common/locales/tr'),
        'ru': () => import('@angular/common/locales/ru'),
        'ro': () => import('@angular/common/locales/ro'),
        'sk': () => import('@angular/common/locales/sk'),
        'sl': () => import('@angular/common/locales/sl'),
        'zh-Hans': () => import('@angular/common/locales/zh-Hans'),
        'zh-Hant': () => import('@angular/common/locales/zh-Hant')
    };
    return list[locale]();
}
export function registerLocaleForEsBuild({ cultureNameLocaleFileMap = {}, errorHandlerFn = defaultLocalErrorHandlerFn, } = {}) {
    return (locale) => {
        localeMap = { ...differentLocales, ...cultureNameLocaleFileMap };
        const l = localeMap[locale] || locale;
        const localeSupportList = "ar|cs|en|en-GB|es|de|fi|fr|hi|hu|is|it|pt|tr|ru|ro|sk|sl|zh-Hans|zh-Hant".split("|");
        if (localeSupportList.indexOf(locale) == -1) {
            return;
        }
        return new Promise((resolve, reject) => {
            return loadLocale(l)
                .then(val => {
                let module = val;
                while (module.default) {
                    module = module.default;
                }
                resolve({ default: module });
            })
                .catch(error => {
                errorHandlerFn({
                    resolve,
                    reject,
                    error,
                    locale,
                });
            });
        });
    };
}
export function registerLocale({ cultureNameLocaleFileMap = {}, errorHandlerFn = defaultLocalErrorHandlerFn, } = {}) {
    return (locale) => {
        localeMap = { ...differentLocales, ...cultureNameLocaleFileMap };
        const localePath = `/locales/${localeMap[locale] || locale}`;
        return new Promise((resolve, reject) => {
            return import(
            /* webpackMode: "lazy-once" */
            /* webpackChunkName: "locales"*/
            /* webpackInclude: /[/\\](ar|cs|en|en-GB|es|de|fi|fr|hi|hu|is|it|pt|tr|ru|ro|sk|sl|zh-Hans|zh-Hant)\.(mjs|js)$/ */
            /* webpackExclude: /[/\\]global|extra/ */
            `@angular/common${localePath}`)
                .then(val => {
                let module = val;
                while (module.default) {
                    module = module.default;
                }
                resolve({ default: module });
            })
                .catch(error => {
                errorHandlerFn({
                    resolve,
                    reject,
                    error,
                    locale,
                });
            });
        });
    };
}
const extraLocales = {};
export function storeLocaleData(data, localeId) {
    extraLocales[localeId] = data;
}
export async function defaultLocalErrorHandlerFn({ locale, resolve }) {
    if (extraLocales[locale]) {
        resolve({ default: extraLocales[localeMap[locale] || locale] });
        return;
    }
    if (isDevMode()) {
        console.error(`Cannot find the ${locale} locale file. You can check how can add new culture at https://abp.io/docs/latest/framework/ui/angular/localization#adding-a-new-culture`);
    }
    resolve();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXItbG9jYWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvY29yZS9sb2NhbGUvc3JjL3V0aWxzL3JlZ2lzdGVyLWxvY2FsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDaEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQVMxQyxJQUFJLFNBQVMsR0FBRyxFQUErQixDQUFDO0FBUWhELFNBQVMsVUFBVSxDQUFDLE1BQWM7SUFDaEMseUhBQXlIO0lBRXpILE1BQU0sSUFBSSxHQUFHO1FBQ1QsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsQ0FBQztRQUNoRCxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLDRCQUE0QixDQUFDO1FBQ2hELElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsNEJBQTRCLENBQUM7UUFDaEQsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQywrQkFBK0IsQ0FBQztRQUN0RCxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLDRCQUE0QixDQUFDO1FBQ2hELElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsNEJBQTRCLENBQUM7UUFDaEQsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsQ0FBQztRQUNoRCxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLDRCQUE0QixDQUFDO1FBQ2hELElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsNEJBQTRCLENBQUM7UUFDaEQsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsQ0FBQztRQUNoRCxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFB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Y2FsZXMgfSBmcm9tICdAYWJwL25nLmNvcmUnO1xyXG5pbXBvcnQgeyBpc0Rldk1vZGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTG9jYWxlRXJyb3JIYW5kbGVyRGF0YSB7XHJcbiAgcmVzb2x2ZTogYW55O1xyXG4gIHJlamVjdDogYW55O1xyXG4gIGVycm9yOiBhbnk7XHJcbiAgbG9jYWxlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmxldCBsb2NhbGVNYXAgPSB7fSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZWdpc3RlckxvY2FsZURhdGEge1xyXG4gIGN1bHR1cmVOYW1lTG9jYWxlRmlsZU1hcD86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XHJcbiAgZXJyb3JIYW5kbGVyRm4/OiAoZGF0YTogTG9jYWxlRXJyb3JIYW5kbGVyRGF0YSkgPT4gYW55O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gbG9hZExvY2FsZShsb2NhbGU6IHN0cmluZykge1xyXG4gIC8vIGhhcmQgY29kZWQgbGlzdCB3b3JrcyB3aXRoIGVzYnVpbGQuIFNvdXJjZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLWNsaS9pc3N1ZXMvMjY5MDQjaXNzdWVjb21tZW50LTE5MDM1OTY1NjNcclxuXHJcbiAgY29uc3QgbGlzdCA9IHtcclxuICAgICAgJ2FyJzogKCkgPT4gaW1wb3J0KCdAYW5ndWxhci9jb21tb24vbG9jYWxlcy9hcicpLFxyXG4gICAgICAnY3MnOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL2NzJyksXHJcbiAgICAgICdlbic6ICgpID0+IGltcG9ydCgnQGFuZ3VsYXIvY29tbW9uL2xvY2FsZXMvZW4nKSxcclxuICAgICAgJ2VuLUdCJzogKCkgPT4gaW1wb3J0KCdAYW5ndWxhci9jb21tb24vbG9jYWxlcy9lbi1HQicpLFxyXG4gICAgICAnZXMnOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL2VzJyksXHJcbiAgICAgICdkZSc6ICgpID0+IGltcG9ydCgnQGFuZ3VsYXIvY29tbW9uL2xvY2FsZXMvZGUnKSxcclxuICAgICAgJ2ZpJzogKCkgPT4gaW1wb3J0KCdAYW5ndWxhci9jb21tb24vbG9jYWxlcy9maScpLFxyXG4gICAgICAnZnInOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL2ZyJyksXHJcbiAgICAgICdoaSc6ICgpID0+IGltcG9ydCgnQGFuZ3VsYXIvY29tbW9uL2xvY2FsZXMvaGknKSxcclxuICAgICAgJ2h1JzogKCkgPT4gaW1wb3J0KCdAYW5ndWxhci9jb21tb24vbG9jYWxlcy9odScpLFxyXG4gICAgICAnaXMnOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL2lzJyksXHJcbiAgICAgICdpdCc6ICgpID0+IGltcG9ydCgnQGFuZ3VsYXIvY29tbW9uL2xvY2FsZXMvaXQnKSxcclxuICAgICAgJ3B0JzogKCkgPT4gaW1wb3J0KCdAYW5ndWxhci9jb21tb24vbG9jYWxlcy9wdCcpLFxyXG4gICAgICAndHInOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL3RyJyksXHJcbiAgICAgICdydSc6ICgpID0+IGltcG9ydCgnQGFuZ3VsYXIvY29tbW9uL2xvY2FsZXMvcnUnKSxcclxuICAgICAgJ3JvJzogKCkgPT4gaW1wb3J0KCdAYW5ndWxhci9jb21tb24vbG9jYWxlcy9ybycpLFxyXG4gICAgICAnc2snOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL3NrJyksXHJcbiAgICAgICdzbCc6ICgpID0+IGltcG9ydCgnQGFuZ3VsYXIvY29tbW9uL2xvY2FsZXMvc2wnKSxcclxuICAgICAgJ3poLUhhbnMnOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL3poLUhhbnMnKSxcclxuICAgICAgJ3poLUhhbnQnOiAoKSA9PiBpbXBvcnQoJ0Bhbmd1bGFyL2NvbW1vbi9sb2NhbGVzL3poLUhhbnQnKVxyXG4gIH1cclxuICByZXR1cm4gbGlzdFtsb2NhbGVdKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckxvY2FsZUZvckVzQnVpbGQoXHJcbiAge1xyXG4gICAgICBjdWx0dXJlTmFtZUxvY2FsZUZpbGVNYXAgPSB7fSxcclxuICAgICAgZXJyb3JIYW5kbGVyRm4gPSBkZWZhdWx0TG9jYWxFcnJvckhhbmRsZXJGbixcclxuICB9ID0ge30gYXMgUmVnaXN0ZXJMb2NhbGVEYXRhLFxyXG4pIHtcclxuICByZXR1cm4gKGxvY2FsZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgICAgbG9jYWxlTWFwID0geyAuLi5kaWZmZXJlbnRMb2NhbGVzLCAuLi5jdWx0dXJlTmFtZUxvY2FsZUZpbGVNYXAgfTtcclxuICAgICAgY29uc3QgbCA9IGxvY2FsZU1hcFtsb2NhbGVdIHx8IGxvY2FsZTtcclxuICAgICAgY29uc3QgbG9jYWxlU3VwcG9ydExpc3QgPSBcImFyfGNzfGVufGVuLUdCfGVzfGRlfGZpfGZyfGhpfGh1fGlzfGl0fHB0fHRyfHJ1fHJvfHNrfHNsfHpoLUhhbnN8emgtSGFudFwiLnNwbGl0KFwifFwiKTtcclxuXHJcbiAgICAgIGlmIChsb2NhbGVTdXBwb3J0TGlzdC5pbmRleE9mKGxvY2FsZSkgPT0gLTEpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGxvYWRMb2NhbGUobClcclxuICAgICAgICAgICAgICAudGhlbih2YWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgbW9kdWxlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICB3aGlsZSAobW9kdWxlLmRlZmF1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZS5kZWZhdWx0O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyBkZWZhdWx0OiBtb2R1bGUgfSk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXJGbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckxvY2FsZShcclxuICB7XHJcbiAgICBjdWx0dXJlTmFtZUxvY2FsZUZpbGVNYXAgPSB7fSxcclxuICAgIGVycm9ySGFuZGxlckZuID0gZGVmYXVsdExvY2FsRXJyb3JIYW5kbGVyRm4sXHJcbiAgfSA9IHt9IGFzIFJlZ2lzdGVyTG9jYWxlRGF0YSxcclxuKSB7XHJcbiAgcmV0dXJuIChsb2NhbGU6IHN0cmluZyk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBsb2NhbGVNYXAgPSB7IC4uLmRpZmZlcmVudExvY2FsZXMsIC4uLmN1bHR1cmVOYW1lTG9jYWxlRmlsZU1hcCB9O1xyXG4gICAgY29uc3QgbG9jYWxlUGF0aCA9IGAvbG9jYWxlcy8ke2xvY2FsZU1hcFtsb2NhbGVdIHx8IGxvY2FsZX1gO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgcmV0dXJuIGltcG9ydChcclxuICAgICAgICAvKiB3ZWJwYWNrTW9kZTogXCJsYXp5LW9uY2VcIiAqL1xyXG4gICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibG9jYWxlc1wiKi9cclxuICAgICAgICAvKiB3ZWJwYWNrSW5jbHVkZTogL1svXFxcXF0oYXJ8Y3N8ZW58ZW4tR0J8ZXN8ZGV8Zml8ZnJ8aGl8aHV8aXN8aXR8cHR8dHJ8cnV8cm98c2t8c2x8emgtSGFuc3x6aC1IYW50KVxcLihtanN8anMpJC8gKi9cclxuICAgICAgICAvKiB3ZWJwYWNrRXhjbHVkZTogL1svXFxcXF1nbG9iYWx8ZXh0cmEvICovXHJcbiAgICAgICAgYEBhbmd1bGFyL2NvbW1vbiR7bG9jYWxlUGF0aH1gXHJcbiAgICAgIClcclxuICAgICAgICAudGhlbih2YWwgPT4ge1xyXG4gICAgICAgICAgbGV0IG1vZHVsZSA9IHZhbDtcclxuICAgICAgICAgIHdoaWxlIChtb2R1bGUuZGVmYXVsdCkge1xyXG4gICAgICAgICAgICBtb2R1bGUgPSBtb2R1bGUuZGVmYXVsdDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJlc29sdmUoeyBkZWZhdWx0OiBtb2R1bGUgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgZXJyb3JIYW5kbGVyRm4oe1xyXG4gICAgICAgICAgICByZXNvbHZlLFxyXG4gICAgICAgICAgICByZWplY3QsXHJcbiAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbn1cclxuXHJcbmNvbnN0IGV4dHJhTG9jYWxlcyA9IHt9IGFzIHsgW2tleTogc3RyaW5nXTogYW55IH07XHJcbmV4cG9ydCBmdW5jdGlvbiBzdG9yZUxvY2FsZURhdGEoZGF0YTogYW55LCBsb2NhbGVJZDogc3RyaW5nKSB7XHJcbiAgZXh0cmFMb2NhbGVzW2xvY2FsZUlkXSA9IGRhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWZhdWx0TG9jYWxFcnJvckhhbmRsZXJGbih7IGxvY2FsZSwgcmVzb2x2ZSB9OiBMb2NhbGVFcnJvckhhbmRsZXJEYXRhKSB7XHJcbiAgaWYgKGV4dHJhTG9jYWxlc1tsb2NhbGVdKSB7XHJcbiAgICByZXNvbHZlKHsgZGVmYXVsdDogZXh0cmFMb2NhbGVzW2xvY2FsZU1hcFtsb2NhbGVdIHx8IGxvY2FsZV0gfSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAoaXNEZXZNb2RlKCkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgIGBDYW5ub3QgZmluZCB0aGUgJHtsb2NhbGV9IGxvY2FsZSBmaWxlLiBZb3UgY2FuIGNoZWNrIGhvdyBjYW4gYWRkIG5ldyBjdWx0dXJlIGF0IGh0dHBzOi8vYWJwLmlvL2RvY3MvbGF0ZXN0L2ZyYW1ld29yay91aS9hbmd1bGFyL2xvY2FsaXphdGlvbiNhZGRpbmctYS1uZXctY3VsdHVyZWAsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmVzb2x2ZSgpO1xyXG59XHJcbiJdfQ==