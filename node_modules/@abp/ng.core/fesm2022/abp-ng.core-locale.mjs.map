{"version":3,"file":"abp-ng.core-locale.mjs","sources":["../../../../packages/core/locale/src/utils/register-locale.ts","../../../../packages/core/locale/src/abp-ng.core-locale.ts"],"sourcesContent":["import { differentLocales } from '@abp/ng.core';\r\nimport { isDevMode } from '@angular/core';\r\n\r\nexport interface LocaleErrorHandlerData {\r\n  resolve: any;\r\n  reject: any;\r\n  error: any;\r\n  locale: string;\r\n}\r\n\r\nlet localeMap = {} as { [key: string]: string };\r\n\r\nexport interface RegisterLocaleData {\r\n  cultureNameLocaleFileMap?: Record<string, string>;\r\n  errorHandlerFn?: (data: LocaleErrorHandlerData) => any;\r\n}\r\n\r\n\r\nfunction loadLocale(locale: string) {\r\n  // hard coded list works with esbuild. Source https://github.com/angular/angular-cli/issues/26904#issuecomment-1903596563\r\n\r\n  const list = {\r\n      'ar': () => import('@angular/common/locales/ar'),\r\n      'cs': () => import('@angular/common/locales/cs'),\r\n      'en': () => import('@angular/common/locales/en'),\r\n      'en-GB': () => import('@angular/common/locales/en-GB'),\r\n      'es': () => import('@angular/common/locales/es'),\r\n      'de': () => import('@angular/common/locales/de'),\r\n      'fi': () => import('@angular/common/locales/fi'),\r\n      'fr': () => import('@angular/common/locales/fr'),\r\n      'hi': () => import('@angular/common/locales/hi'),\r\n      'hu': () => import('@angular/common/locales/hu'),\r\n      'is': () => import('@angular/common/locales/is'),\r\n      'it': () => import('@angular/common/locales/it'),\r\n      'pt': () => import('@angular/common/locales/pt'),\r\n      'tr': () => import('@angular/common/locales/tr'),\r\n      'ru': () => import('@angular/common/locales/ru'),\r\n      'ro': () => import('@angular/common/locales/ro'),\r\n      'sk': () => import('@angular/common/locales/sk'),\r\n      'sl': () => import('@angular/common/locales/sl'),\r\n      'zh-Hans': () => import('@angular/common/locales/zh-Hans'),\r\n      'zh-Hant': () => import('@angular/common/locales/zh-Hant')\r\n  }\r\n  return list[locale]();\r\n}\r\n\r\nexport function registerLocaleForEsBuild(\r\n  {\r\n      cultureNameLocaleFileMap = {},\r\n      errorHandlerFn = defaultLocalErrorHandlerFn,\r\n  } = {} as RegisterLocaleData,\r\n) {\r\n  return (locale: string): Promise<any> => {\r\n      localeMap = { ...differentLocales, ...cultureNameLocaleFileMap };\r\n      const l = localeMap[locale] || locale;\r\n      const localeSupportList = \"ar|cs|en|en-GB|es|de|fi|fr|hi|hu|is|it|pt|tr|ru|ro|sk|sl|zh-Hans|zh-Hant\".split(\"|\");\r\n\r\n      if (localeSupportList.indexOf(locale) == -1) {\r\n          return;\r\n      }\r\n      return new Promise((resolve, reject) => {\r\n          return loadLocale(l)\r\n              .then(val => {\r\n                  let module = val;\r\n                  while (module.default) {\r\n                      module = module.default;\r\n                  }\r\n                  resolve({ default: module });\r\n              })\r\n              .catch(error => {\r\n                  errorHandlerFn({\r\n                      resolve,\r\n                      reject,\r\n                      error,\r\n                      locale,\r\n                  });\r\n              });\r\n      });\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function registerLocale(\r\n  {\r\n    cultureNameLocaleFileMap = {},\r\n    errorHandlerFn = defaultLocalErrorHandlerFn,\r\n  } = {} as RegisterLocaleData,\r\n) {\r\n  return (locale: string): Promise<any> => {\r\n    localeMap = { ...differentLocales, ...cultureNameLocaleFileMap };\r\n    const localePath = `/locales/${localeMap[locale] || locale}`;\r\n    return new Promise((resolve, reject) => {\r\n      return import(\r\n        /* webpackMode: \"lazy-once\" */\r\n        /* webpackChunkName: \"locales\"*/\r\n        /* webpackInclude: /[/\\\\](ar|cs|en|en-GB|es|de|fi|fr|hi|hu|is|it|pt|tr|ru|ro|sk|sl|zh-Hans|zh-Hant)\\.(mjs|js)$/ */\r\n        /* webpackExclude: /[/\\\\]global|extra/ */\r\n        `@angular/common${localePath}`\r\n      )\r\n        .then(val => {\r\n          let module = val;\r\n          while (module.default) {\r\n            module = module.default;\r\n          }\r\n          resolve({ default: module });\r\n        })\r\n        .catch(error => {\r\n          errorHandlerFn({\r\n            resolve,\r\n            reject,\r\n            error,\r\n            locale,\r\n          });\r\n        });\r\n    });\r\n  };\r\n}\r\n\r\nconst extraLocales = {} as { [key: string]: any };\r\nexport function storeLocaleData(data: any, localeId: string) {\r\n  extraLocales[localeId] = data;\r\n}\r\n\r\nexport async function defaultLocalErrorHandlerFn({ locale, resolve }: LocaleErrorHandlerData) {\r\n  if (extraLocales[locale]) {\r\n    resolve({ default: extraLocales[localeMap[locale] || locale] });\r\n    return;\r\n  }\r\n\r\n  if (isDevMode()) {\r\n    console.error(\r\n      `Cannot find the ${locale} locale file. You can check how can add new culture at https://abp.io/docs/latest/framework/ui/angular/localization#adding-a-new-culture`,\r\n    );\r\n  }\r\n\r\n  resolve();\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}